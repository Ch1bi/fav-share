(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,n){e.exports=n(95)},48:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(37),c=n.n(o),i=(n(48),n(99)),l=n(101),s=n(100),u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function h(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var d=n(16),m=n(18),f=n(41),p=n(19),g={data:[],error:!1};var v={fireUser:null};var E=Object(m.c)({songs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SONG":return console.log(t),Object(p.a)({},e,{data:e.data.concat(t.payload)});case"GET_ALL_SONGS":return Object(p.a)({},e,{data:t.payload});case"DELETE_SONG":return console.log(t),Object(p.a)({},e,{data:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNED_IN":case"GET_CURRENT_USER":return Object(p.a)({},e,{fireUser:t.payload});default:return e}}}),b=n(10),S=n(11),w=n(14),O=n(12),y=n(13),j=(n(55),n(57),n(20)),N=n(24),k=n.n(N);n(69);k.a.initializeApp({apiKey:"AIzaSyD7lPYMsnUCKmbylTSAFzxLiKvDz-Pc_pM",authDomain:"music-share-95e16.firebaseapp.com",projectId:"music-share-95e16"});var C=k.a.firestore(),U=k.a.auth();function T(){U.signOut().then(function(e){return e}).catch(function(e){return console.log(e)})}C.settings({timestampsInSnapshots:!0}),C.enablePersistence().catch(function(e){"failed-precondition"===e.code||e.code});var D=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(j.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.userSignUp()},n.userSignUp=function(){var e,t,a={user:n.state.email,password:n.state.pass};e=a.user,t=a.password,U.createUserWithEmailAndPassword(e,t).then(function(e){return console.log(e)}).catch(function(e){console.log(e)})},n.state={email:"",pass:""},n}return Object(y.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"pass",placeholder:"Password",value:this.state.pass,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"SIGN UP"}))}}]),t}(a.Component),A=n(98),I="DELETE_SONG",L="GET_ALL_SONGS",G="SIGNED_IN",_="GET_CURRENT_USER";function M(e){return function(t){!function(e){console.log(e);var t={data:e};null!==U.currentUser?C.collection(U.currentUser.uid).add(t):console.log("Please login with an account")}(e),t({type:"ADD_SONG",payload:e})}}function x(e,t){var n=[];return function(a){(function(e,t){console.log(t);var n=C.collection(e.user.uid);return n.get().then(function(e){var a=e.docs[t].id;return console.log(a),n.doc(a).delete(),n.get({source:"server"})}).catch(function(e){return console.log(e)})})(e,t).then(function(e){e.docs.map(function(e){n.push(e.data().data)}),a({type:I,payload:n})}).catch(function(e){return console.log(e)})}}function R(e){console.log("getting all saved songs");var t=[];return function(n){(function(e){return C.collection(e.user.uid).get({source:"server"})})(e).then(function(e){e.docs.map(function(e){t.push(e.data().data)}),n({type:L,payload:t})}).catch(function(e){console.log("Error getting documents:",e)})}}function P(e,t){return console.log("signing in"),function(n){(function(e,t){return U.signInWithEmailAndPassword(e,t)})(e,t).then(function(e){localStorage.setItem("userData",JSON.stringify(e)),n({type:G,payload:e})}).catch(function(e){return console.log("Error fetching user")})}}function W(){return console.log("getting current user"),function(e){new Promise(function(e){e(JSON.parse(localStorage.getItem("userData")))}).then(function(t){return e({type:_,payload:t})})}}var J=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(j.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.userLogIn()},n.userLogIn=function(){var e={email:n.state.email,password:n.state.pass};n.props.getUser(e.email,e.password),n.setState({redirect:!0})},n.state={email:"",pass:"",redirect:!1},n}return Object(y.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(A.a,{to:"/search"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"email",name:"email",placeholder:"Username",value:this.state.email,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"pass",placeholder:"Password",value:this.state.pass,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"LOGIN"})))}}]),t}(a.Component);var z=Object(d.b)(null,function(e){return{getUser:function(t,n){return e(P(t,n))}}})(J),B=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this,e))).updateRoute=function(e){n.setState({selectedRoute:e.target.firstChild.nodeValue})},n.state={selectedRoute:"Sign Up"},n}return Object(y.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-container"},r.a.createElement("ul",{className:"routes"},["Sign Up","Login"].map(function(t){return r.a.createElement("li",{style:t===e.state.selectedRoute?{borderBottom:"3px #ffffff solid"}:null,onClick:e.updateRoute,key:t},t)})),"Sign Up"===this.state.selectedRoute?r.a.createElement(D,null):r.a.createElement(z,null))}}]),t}(a.Component),K=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this,e))).toggleModal=function(){n.setState({showModal:!n.state.showModal})},n.state={showModal:!1},n}return Object(y.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"main-heading"},"Share Music"),r.a.createElement("p",null,"Search and share your favorite artists"),r.a.createElement("button",{onClick:this.toggleModal,className:"get-started"},"Get Started"),this.state.showModal&&r.a.createElement(B,null))}}]),t}(a.Component),V=n(42),Y=n.n(V),F=(n(89),n(91),n(97)),Q=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("ul",null,r.a.createElement(F.a,{to:{pathname:"/search"}},r.a.createElement("li",null,"Search")),r.a.createElement(F.a,{to:{pathname:"/collection"}},r.a.createElement("li",null,"Library")),r.a.createElement(F.a,{to:{pathname:"/"}},r.a.createElement("li",{onClick:T},"SignOut"))))},$=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this,e))).searchMusic=function(e){n.setState({text:e.target.value}),n.getMusic(n.state.text)},n.addToLibrary=function(e,t){console.log(t),n.props.dispatchSong(e),n.setState(function(e){return{showToast:!e.showToast}},function(){setTimeout(function(){n.setState(function(e){return{showToast:!e.showToast}})},1e3)})},n.state={text:"",data:[],musicToAdd:[]},n}return Object(y.a)(t,e),Object(S.a)(t,[{key:"getMusic",value:function(e){var t=this;return Y.a.get("".concat("https://itunes.apple.com/search?term=").concat(e,"&media=music&limit=24")).then(function(e){t.setState({data:e.data.results})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search-container"},r.a.createElement(Q,null),r.a.createElement("input",{type:"text",name:"search",placeholder:"search...",value:this.state.text,onChange:this.searchMusic}),0!==this.state.text.length?null:r.a.createElement("p",null,"Start typing to view music"),r.a.createElement("div",{className:"album-info-container"},this.state.data.map(function(t,n){return r.a.createElement("div",{className:"album-info-row",key:n},r.a.createElement("img",{src:t.artworkUrl100,alt:"Album art",className:"placeholder"}),r.a.createElement("div",{className:"album-info"},r.a.createElement("p",null,"Album: ",t.collectionName),r.a.createElement("p",null,"Artist: ",t.artistName),r.a.createElement("p",null,"Year: ",t.releaseDate.slice(0,4)),r.a.createElement("button",{className:"add-lib-btn",onClick:function(){return e.addToLibrary(t)}},"Add to library")))})))}}]),t}(a.Component);var q=Object(d.b)(null,function(e){return{dispatchSong:function(t){return e(M(t))}}})($),H=(n(93),function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).shareSong=function(e){navigator.share({title:"Great Song",text:"Listen to this song!",url:e.then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})})},n}return Object(y.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatchAllSongs(JSON.parse(localStorage.getItem("userData"))),this.props.dispatchSignIn()}},{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props,n=t.addedSongs;t.fireUser;return r.a.createElement("div",{className:"collection-container"},r.a.createElement(Q,null),r.a.createElement("h1",null,"All Music"),r.a.createElement("div",{className:"album-info-container"},n.data.map(function(t,n){return r.a.createElement("div",{key:n,className:"album-info-row"},r.a.createElement("img",{src:t.artworkUrl100,alt:"Album art",className:"placeholder"}),r.a.createElement("div",{className:"album-info"},r.a.createElement("p",null,"Album:",t.collectionName),r.a.createElement("p",null,"Artist:",t.artistName),r.a.createElement("p",null,"Year:",t.releaseDate.slice(0,4)),r.a.createElement("a",{href:t.trackViewUrl,target:"_blank",rel:"noopener noreferrer"},"Preview Track"),navigator.share?r.a.createElement("button",{onClick:function(){return e.shareSong(t.trackViewUrl)}},"Share Track"):null,r.a.createElement("button",{onClick:function(){return e.props.dispatchDelete(JSON.parse(localStorage.getItem("userData")),n)}},"Delete Track")))})))}}]),t}(a.Component));var X=Object(d.b)(function(e){return{addedSongs:e.songs}},function(e){return{dispatchSignIn:function(){return e(W())},dispatchAllSongs:function(t){return e(R(t))},dispatchDelete:function(t,n){return e(x(t,n))}}})(H),Z=Object(m.d)(E,window.devToolsExtension&&window.devToolsExtension(),Object(m.a)(f.a));c.a.render(r.a.createElement(d.a,{store:Z},r.a.createElement(i.a,null,r.a.createElement(l.a,null,r.a.createElement(s.a,{exact:!0,path:"/",component:K}),r.a.createElement(s.a,{path:"/search",component:q}),r.a.createElement(s.a,{path:"/collection",component:X})))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/fav-share",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/fav-share","/service-worker.js");u?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):h(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):h(e)})}}()}},[[43,2,1]]]);
//# sourceMappingURL=main.cc150329.chunk.js.map